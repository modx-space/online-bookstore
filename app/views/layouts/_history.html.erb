<div class="row">
  <div class="col-md-offset-2 col-md-8">
    <h3><span class="label label-info navbar-left">当前预约</span></h3>
    <table class="table table-bordered table-hover bg-info">
      <thead>
        <tr>
          <th>#</th>
          <th>书名</th>
          <th>预定时间</th>
          <th>排队人数</th>
        </tr>
      </thead>
      <tbody>
        <% @ordering_records.each_with_index do |order, index| %>
        <tr>
          <th><%= index+1 %></th>
          <td><%= order.book.name %></td>
          <td><%= order.created_at.strftime("%Y-%m-%d") %></td>
          <td><%= order.book.who_is_ordering.count %></td>
        </tr>
        <% end %>
      </tbody>
    </table>

    <h3><span class="label label-success navbar-left">当前借阅</span></h3>
    <table class="table table-bordered table-hover bg-success">
      <thead>
        <tr>
          <th>#</th>
          <th>书名</th>
          <th>借阅时间</th>
          <th>到期时间</th>
        </tr>
      </thead>
      <tbody>
        <% @borrowing_records.each_with_index do |borrow, index| %>
        <tr>
          <th><%= index+1 %></th>
          <td><%= borrow.book.name %></td>
          <td><%= borrow.created_at.strftime("%Y-%m-%d") %></td>
          <td><%= borrow.should_return_date %></td>
        </tr>
        <% end %>
      </tbody>
    </table>

    <h3><span class="label label-primary navbar-left">历史记录</span></h3>
    <table class="table table-bordered table-hover bg-primary">
      <thead>
        <tr>
          <th>#</th>
          <th>书名</th>
          <th>预约/借阅时间</th>
          <th>归还时间</th>
        </tr>
      </thead>
      <tbody>
        <% @returned_records.each_with_index do |record, index| %>
        <tr>
          <th><%= index+1 %></th>
          <td><%= record.book.name %></td>
          <td><%= record.created_at.strftime("%Y-%m-%d") %></td>
          <td><%= record.returned_at.strftime("%Y-%m-%d") %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
